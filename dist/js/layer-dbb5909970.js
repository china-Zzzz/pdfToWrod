"use strict";function setParam(e){var o=JSON.parse(e);"1"===o.type?_template(o.option):"2"===o.type?_progressTem(o.option):"3"===o.type?_paymentTem(o.option):"4"===o.type?_passwordTem(o.option):_pagesTem(o.option)}function _template(e){var o=$("#template").html(),n=Handlebars.compile(o),t=n(e);$("#body").html(t),_css(),_off(),_event()}function _passwordTem(e){var o=$("#password").html(),n=Handlebars.compile(o),t=n(e);$("#body").html(t),_css(),_off(),_event()}function _progressTem(e){var o=$("#progress").html(),n=Handlebars.compile(o),t=n(e);$("#body").html(t),_css(),_off(),_event()}function _pagesTem(e){var o=$("#pages").html(),n=Handlebars.compile(o),t=n(e),a=e.pages[1];$("#body").html(t),_css(),_off(),_event();var s=parseInt($("#end").val());$("#begin").bind("propertychange input",function(e){var o=parseInt($("#end").val()),n=parseInt($(e.target).val());n>o||0===n||isNaN(n)||isNaN(o)||o>s||o>a?(0===n&&$(e.target).val(""),$(".pages").css({background:"#98a0b4",border:"1px solid #98a0b4"}),$(".maks").removeClass("none")):($(".pages").css({background:"#F98953",border:"1px solid #F98953"}),$(".maks").addClass("none"))}),$("#end").bind("propertychange input",function(e){var o=parseInt($(e.target).val()),n=parseInt($("#begin").val());n>o||0===o||isNaN(o)||o>a||o>s||isNaN(n)?(0===o&&$(e.target).val(""),$(".pages").css({background:"#98a0b4",border:"1px solid #98a0b4"}),$(".maks").removeClass("none")):($(".pages").css({background:"#F98953",border:"1px solid #F98953"}),$(".maks").addClass("none"))})}function SetProgress(e){if("100"!==e)$("#pro").css("width",e+"%");else{var o={type:"2",option:{isProgress:!0,isScroll:!1,data:{title:"检查更新",text:["下载成功，请点击“立即安装”"],progress:{color:"color:#efa075"},button:[{text:"立即安装","background-color":"ok",type:"update"}]}}};_progressTem(o.option),$(".am-progress-b").css("width","100%")}}function _paymentTem(e){var o=$("#payment").html(),n=Handlebars.compile(o),t=n(e);$("body").html(t),_css(),_off(),_event()}function GetQueryString(e){var o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(o);return null!=n?unescape(n[2]):null}function _css(){var e=$(".footer-button").find(".button").length,o=$(".section-p").find("p").length,n=$(".footer-button").find(".button").outerWidth(),t=$(".top").outerWidth();$(".section-p").outerHeight();$(".top").css("margin-left",-(t/2)),$(".top").css("left","50%"),1===e?($("footer").css("margin-left",-((n*e+20)/2)),"Microsoft Internet Explorer"==navigator.appName&&"MSIE7.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")&&$("footer").css("margin-left",-((n*e+20)/2)-55)):2===e&&$("footer").css("margin-left",-((n*e+20)/2+5)),1===o?($(".section-p").css("margin-top","11px"),$("footer").css("bottom","42px")):2===o?$(".section-p").css("margin-top","4px"):3===o&&($(".section-p").css("margin-top","0px"),$("footer").css("margin-left",-((n*e+20)/2+5)))}function KeyDown(){$(".ok").mousedown()}function _event(){document.onkeydown=function(e){var o=window.event||e,n=o.keyCode||o.which;116==n&&(o.preventDefault?o.preventDefault():(o.keyCode=0,o.returnValue=!1)),$(document).bind("contextmenu",function(e){return!1})},$(".delete").on("mousedown",function(e){try{window.external.Close()}catch(o){}}),$(".found").on("mousedown",function(e){try{window.external.DeskTopIcon()}catch(o){}}),$(".fivePage").on("mousedown",function(e){try{window.external.DeskTopIcon()}catch(o){}}),$(".update").on("mousedown",function(e){try{window.external.Update()}catch(o){}}),$(".payment").on("mousedown",function(e){try{window.external.Pay()}catch(o){}}),$(".password").on("mousedown",function(e){var o=$(".password-input").find("input").val();try{var n=window.external.SetPassword(o);"false"===n&&$(".password-input span").removeClass("none")}catch(t){}}),$(".land").on("mousedown",function(e){try{window.external.Login()}catch(o){}}),$(".pages").on("mousedown",function(e){var o=$("#begin").val()+"-"+$("#end").val();try{window.external.SetConvertPage(o)}catch(n){}})}function _off(){$(".delete").off(),$(".found").off(),$(".update").off(),$(".payment").off(),$(".password").off(),$(".land").off()}